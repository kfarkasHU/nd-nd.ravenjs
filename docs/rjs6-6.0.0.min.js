window.Raven=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n),t.d(n,"core",(function(){return p})),t.d(n,"plugins",(function(){return P}));class i{static get nextId(){return"raven_plugin_"+i.currentId++}}i.currentId=1e3;class r{constructor(e){this.pluginName=e,this.identifier=i.nextId}}class l extends r{constructor(e,n,t,i=!1){super(e),this.pluginSelector=n,this.onEvaluate=t,this.opensNewContext=i}}class o{static init(e){o.context||(o.context=e)}static getAllSelector(){return o.registeredPlugins.map(e=>e.pluginSelector)}static findBindingPluginBySelector(e){return o.registeredPlugins.find(n=>n.pluginSelector===e)}static registerPlugin(e){o.checkAvability(e),e instanceof l?o.registerBindingPlugin(e):o.registerGlobalPlugin(e),o.registeredPlugins.push(e)}static getAllRegisteredPlugin(){return o.registeredPlugins}static checkAvability(e){if(o.registeredPlugins.find(n=>n.pluginName===e.pluginName))throw`Plugin with name '${e.pluginName}' is already registered!`}static registerBindingPlugin(e){}static registerGlobalPlugin(e){if(!o.context)throw"You must call 'Raven.born()' before register any global plugins!";if(o.context.pluginScope[e.globalName])throw`The global name ${e.globalName} is already in use!`;o.context.pluginScope[e.globalName]={};const n=Object.keys(e.functions);for(const t of n)o.context.pluginScope[e.globalName][t]=e.functions[t]}}o.registeredPlugins=[];class u extends r{constructor(e,n,t){super(e),this.globalName=n,this.functions=t}}class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}createBindingPlugin(e,n,t,i=!1){return new l(e,n,t,i)}createGlobalPlugin(e,n,t){return new u(e,n,t)}}class s{constructor(){this.pluginScope={}}static getInstance(){return s.instance||(s.instance=new s),s.instance}get ext(){return a.getInstance()}born(){o.init(this)}getAllSelector(){return o.getAllSelector()}findBindingPluginBySelector(e){return o.findBindingPluginBySelector(e)}registerPlugin(e){o.registerPlugin(e)}getRegisteredPlugins(){return o.getAllRegisteredPlugin()}}class c{static loadGlobalPlugin(e,n,t){const i=c.ravenContext.ext.createGlobalPlugin(e,n,t);c.loadedPlugins.push(i)}static loadBindingPlugin(e,n,t,i=!1){const r=c.ravenContext.ext.createBindingPlugin(e,n,t,i);c.loadedPlugins.push(r)}static appendAllLoaded(){const e=s.getInstance();e.born(),c.loadedPlugins.forEach(n=>{e.registerPlugin(n)})}}c.loadedPlugins=[],c.ravenContext=s.getInstance();c.loadGlobalPlugin("raven-observables","observables",{egg:function(e){function n(){return arguments.length>0?(n.value=arguments[0],this):n.value}return n.value=e,n},eggs:function(e){function n(){return arguments.length>0?(n.value=arguments[0],this):n.value}return n.value=e,n.push=n.value.push,n.pop=n.value.pop,n.indexOf=n.value.indexOf,n}});const g=s.getInstance();function d(e){return[].slice.call(e)}c.loadGlobalPlugin("raven-fly","binding",{fly:function(e,n){if("string"==typeof e&&(e=document.getElementById(e)),!e)throw"Cannot find the binding target!";const t=g.getAllSelector();!function e(n,t,i){for(const r of n){const n=[];let l=!0;for(const e of i){const t=r.getAttribute(e);t&&n.push({name:e,expression:t})}if(n.length>0){if(n.length>1)throw"More than one attributes detected on element!";const e=n[0],i=g.findBindingPluginBySelector(e.name);if(!i)throw`Raven binding plugin was not found with selector ${e.name}!`;i.onEvaluate(r,e.expression,t),l=!i.opensNewContext}r.children.length>0&&l&&e(d(r.children),t,i)}}(d(e.children),n,t)}});class f{static evaluate(e,n){return Function.apply(null,[...Object.keys(n),"expression","return eval(expression)"]).apply(null,[...Object.values(n),e])}}c.loadBindingPlugin("raven-if","raven-if",(function(e,n,t){const i=f.evaluate(n,t);e.style.display=i?"":"none"}));const v=s.getInstance();c.loadBindingPlugin("raven-for","raven-for",(function(e,n,t){const i=f.evaluate(n,t),r=e.cloneNode(!0);for(let n=0;n<i.length;n++){const t=r.cloneNode(!0);v.pluginScope.binding.fly(t,{element:i[n]}),e.parentElement.appendChild(t)}e.parentElement.removeChild(e)}),!0);c.loadBindingPlugin("raven-text","raven-text",(function(e,n,t){const i=f.evaluate(n,t);e.textContent=i}));c.loadBindingPlugin("raven-mouseout","raven-mouseout",(function(e,n,t){e.addEventListener("mouseout",(function(){f.evaluate(n,t)}))}));c.loadBindingPlugin("raven-mouseover","raven-mouseover",(function(e,n,t){e.addEventListener("mouseover",(function(){f.evaluate(n,t)}))}));c.loadBindingPlugin("raven-click","raven-click",(function(e,n,t){e.addEventListener("click",(function(e){f.evaluate(n,{...t,ravenEvent:e})}))}));c.loadBindingPlugin("raven-rightclick","raven-rightclick",(function(e,n,t){e.addEventListener("contextmenu",(function(e){f.evaluate(n,{...t,ravenEvent:e});return!1}))}));c.loadBindingPlugin("raven-contextmenu","raven-contextmenu",(function(e,n,t){e.addEventListener("contextmenu",(function(e){f.evaluate(n,{...t,ravenEvent:e});return e.preventDefault(),!1}))}));const p=s.getInstance(),P=p.pluginScope;c.appendAllLoaded()}]);